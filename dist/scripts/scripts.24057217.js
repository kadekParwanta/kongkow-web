"use strict";angular.module("kongkowWebApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","formly","formlyBootstrap","lbServices","angularMoment"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/signup",{templateUrl:"views/signup.html",controller:"AuthCtrl",controllerAs:"auth"}).when("/login",{templateUrl:"views/login.html",controller:"AuthCtrl",controllerAs:"auth"}).otherwise({redirectTo:"/"})}]).config(["LoopBackResourceProvider","$httpProvider",function(a,b){a.setUrlBase("https://kongkow-backend.herokuapp.com/api"),b.interceptors.push(["$q","$location","LoopBackAuth",function(a,b,c){return{responseError:function(d){return 401===d.status&&(c.clearUser(),c.clearStorage(),b.nextAfterLogin=b.path(),b.path("/login")),a.reject(d)}}}])}]),angular.module("kongkowWebApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("kongkowWebApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("kongkowWebApp").service("Auth",["$rootScope","ChatUser","$location",function(a,b,c){var d={signup:function(e){b.create(e,function(){b.login(e,function(b){d.currentUser=b.user,a.islogged=!0,c.path("/")})})},login:function(e){b.login(e,function(b){d.currentUser=b.user,console.log(d.currentUser),a.islogged=!0,null===c.nextAfterLogin?c.path("/"):c.path(c.nextAfterLogin)})},logout:function(){b.logout(function(){c.path("/"),a.islogged=!1,d.currentUser=null})},ensureCurrentUser:function(c){b.isAuthenticated()&&null==d.currentUser&&(a.islogged=!0,b.getCurrent(function(a){d.currentUser=a,c()}))},currentUser:null};return d}]),angular.module("kongkowWebApp").controller("AuthCtrl",["$scope","Auth",function(a,b){a.signup=function(a){b.signup(a)},a.login=function(a){b.login(a)},a.loginFields=[{key:"email",type:"input",templateOptions:{required:!0,label:"Email"}},{key:"password",type:"input",templateOptions:{type:"password",required:!0,label:"Password"}}],a.RegisterFields=[{key:"firstName",type:"input",templateOptions:{required:!0,label:"First Name"}},{key:"lastName",type:"input",templateOptions:{required:!0,label:"Last Name"}},{key:"email",type:"input",templateOptions:{required:!0,label:"Email"}},{key:"password",type:"input",templateOptions:{type:"password",required:!0,label:"Password"}}]}]),angular.module("kongkowWebApp").controller("NavbarCtrl",function(){$scope.isLoggedin=!1,Auth.ensureCurrentUser(function(){$scope.currentUser=Auth.currentUser,$scope.islogged=$rootScope.islogged}),$rootScope.$watch("islogged",function(a,b){$scope.isLoggedin=a,console.log("islogged changed value : "+a),a&&($scope.currentUser=Auth.currentUser,$scope.isLoggedin=a)}),$scope.logout=function(){Auth.logout()}}),angular.module("kongkowWebApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/login.html",'<div id="loginbox" style="margin-top:50px" class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2"> <div class="panel panel-success"> <div class="panel-heading"> <div class="panel-title">Sign In</div> </div> <div style="padding-top:30px" class="panel-body"> <div style="display:none" id="login-alert" class="alert alert-danger col-sm-12"></div> <formly-form model="user" fields="loginFields"> <button type="submit" class="btn btn-success" ng-click="login(user)">Login</button> </formly-form> </div> </div> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <h1>Welcome to Kongkow</h1> </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row marketing"> <h4>HTML5 Boilerplate</h4> <p> HTML5 Boilerplate is a professional front-end template for building fast, robust, and adaptable web apps or sites. </p> <h4>Angular</h4> <p> AngularJS is a toolset for building the framework most suited to your application development. </p> <h4>Karma</h4> <p>Spectacular Test Runner for JavaScript.</p> </div>'),a.put("views/signup.html",'<div id="loginbox" style="margin-top:50px" class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2"> <div class="panel panel-success"> <div class="panel-heading"> <div class="panel-title">Sign up</div> </div> <div style="padding-top:30px" class="panel-body"> <div style="display:none" id="login-alert" class="alert alert-danger col-sm-12"></div> <formly-form model="newUser" fields="RegisterFields"> <button type="submit" class="btn btn-primary" ng-click="signup(newUser)">Register</button> </formly-form> </div> </div> </div>')}]);